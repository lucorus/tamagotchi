import asyncio
import logging
import sqlite3
import sys
from aiogram.filters import Command, CommandStart
from aiogram.types import Message, CallbackQuery
from aiogram.utils.keyboard import InlineKeyboardBuilder
import base
import config
from aiogram import Bot, Dispatcher, types, F
import random


dp = Dispatcher()
# –°–ª–æ–≤–∞—Ä—å –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –æ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä–∞—Ö
# {user_id: ['–Ω–∞–∑–≤–∞–Ω–∏–µ_–∏–≥—Ä—ã', '–¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è –¥–∞–Ω–Ω–æ–π –∏–≥—Ä—ã'], }
game_data = dict()
# —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–ø–∞—Å—Ç—å—Å—è/–±—É–¥—É—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –≤–µ—Ä–Ω–æ –Ω–∞–∑–≤–∞–Ω–Ω—ã–º–∏ –≤ –∏–≥—Ä–µ "–≥–æ—Ä–æ–¥–∞"
towns = ['–ê–±–∞–∫–∞–Ω', '–ê–±–∏–Ω—Å–∫', '–ê–≥–∞—Ç–∞', '–ê–≥–∏–Ω—Å–∫–æ–µ', '–ê–¥–ª–µ—Ä', '–ê–¥—ã–≥–µ–π—Å–∫', '–ê–∑–æ–≤', '–ê–ª–∞–≥–∏—Ä', '–ê–ª–∞–ø–∞–µ–≤—Å–∫', '–ê–ª–¥–∞–Ω', '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤', '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∞', '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤—Å–∫', '–ê–ª–µ–∫—Å–∏–Ω', '–ê–ª—É–ø–∫–∞', '–ê–ª—É—à—Ç–∞', '–ê–º–¥–µ—Ä–º–∞', '–ê–º—É—Ä', '–ê–º—É—Ä—Å–∫', '–ê–Ω–∞–ø–∞', '–ê–Ω–≥–∞—Ä—Å–∫', '–ê–Ω–∏–≤–∞', '–ê–ø–∞—Ç–∏—Ç—ã', '–ê–ø—Ä–µ–ª–µ–≤–∫–∞', '–ê–ø—à–µ—Ä–æ–Ω—Å–∫', '–ê—Ä–≥–∞—è—à', '–ê—Ä–¥–æ–Ω', '–ê—Ä–∑–∞–º–∞—Å', '–ê—Ä–º–∞–≤–∏—Ä', '–ê—Ä—Å–µ–Ω—å–µ–≤', '–ê—Ä—Ç–µ–º', '–ê—Ä—Ö–∞–Ω–≥–µ—Å—å—Å–∫', '–ê—Ä—Ö—ã–∑', '–ê—Ä—à–∞–Ω', '–ê—Å–±–µ—Å—Ç', '–ê—Å–∏–Ω–æ', '–ê—Ö—Ç—É–±–∏–Ω—Å–∫', '–ê—á–∏–Ω—Å–∫', '–ê—à–∞', '–ë–∞–≤–ª—ã', '–ë–∞–π–∫–∞–ª—å—Å–∫', '–ë–∞–∫—Å–∞–Ω', '–ë–∞–ª–∞—à–∏—Ö–∞', '–ë–∞–ª–∞—à–æ–≤', '–ë–∞–ª—Ç–∏–π—Å–∫', '–ë–∞—Ä–≥—É–∑–∏–Ω', '–ë–∞—Ä–Ω–∞—É–ª', '–ë–∞—Å–∫—É–Ω—á–∞–∫', '–ë–∞—Ç–∞–π—Å–∫', '–ë–∞—à–∫', '–ë–µ–ª–≥–æ—Ä–æ–¥', '–ë–µ–ª–æ–≥–æ—Ä—Å–∫', '–ë–µ–ª–æ–∫—É—Ä–∏—Ö–∞', '–ë–µ–ª–æ–º–æ—Ä—Å–∫', '–ë–µ–ª–æ—Ä–µ—Ü–∫', '–ë–µ–ª–æ—Ä–µ—á–µ–Ω—Å–∫', '–ë–µ—Ä–µ–∑–Ω–∏–∫–∏', '–ë–µ—Å–ª–∞–Ω', '–ë–∏–π—Å–∫', '–ë–∏–ª–∏–±–∏–Ω–æ', '–ë–∏—Ä–æ–±–∏–¥–∂–∞–Ω', '–ë–∏—Ä—Å–∫', '–ë–ª–∞–≥–æ–≤–µ—â–µ–Ω—Å–∫', '–ë–æ–≥—É—á–∞—Ä', '–ë–æ–¥–∞–π–±–æ', '–ë–æ–ª–æ–≥–æ–µ', '–ë–æ–º–Ω–∞–∫', '–ë–æ—Ä', '–ë–æ—Ä–∑—è', '–ë–æ—Ä–æ–≤—Å–∫', '–ë—Ä–∞—Ç—Å–∫', '–ë—Ä–µ–¥—ã', '–ë—Ä–æ–Ω–Ω–∏—Ü—ã', '–ë—Ä—è–Ω—Å–∫', '–ë—É–≥—É–ª—å–º–∞', '–ë—É–≥—É—Ä—É—Å–ª–∞–Ω', '–ë—É–¥–µ–Ω–Ω–æ–≤—Å–∫', '–ë—É–∑—É–ª—É–∫', '–ë—É–π–Ω–∞–∫—Å–∫', '–ë—É—Ä—è—Ç', '–ë—ã–∫–æ–≤–æ', '–í–∞–ª–∞–∞–º', '–í–µ–¥–µ–Ω–æ', '–í–µ–ª–∏–∫–∏–µ', '–í–µ–Ω–¥–∏–Ω–≥–∞', '–í–µ—Ä–µ—â–∞–≥–∏–Ω–æ', '–í–µ—Ä—Ö–Ω–µ–µ', '–í–µ—Ä—Ö–æ—Ç—É—Ä—å–µ', '–í–µ—Ä—Ö–æ—è–Ω—Å–∫', '–í–∏–¥–Ω–æ–µ', '–í–∏–ª—é–π—Å–∫', '–í–∏—Ç–∏–º', '–í–∏—à–µ—Ä–∞', '–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫', '–í–ª–∞–¥–∏–∫–∞–≤–∫–∞–∑', '–í–ª–∞–¥–∏–º–∏—Ä', '–í–Ω—É–∫–æ–≤–æ', '–í–æ–¥—ã', '–í–æ–ª–≥–æ–≥—Ä–∞–¥', '–í–æ–ª–≥–æ–¥–æ–Ω—Å–∫', '–í–æ–ª–æ–≥–¥–∞', '–í–æ–ª–æ–∫–æ–ª–∞–º—Å–∫', '–í–æ–ª—Ö–æ–≤', '–í–æ—Ä–∫—É—Ç–∞', '–í–æ—Ä–æ–Ω–µ–∂', '–í–æ—Å–∫—Ä–µ—Å–µ–Ω—Å–∫', '–í–æ—Ç–∫–∏–Ω—Å–∫', '–í—Å–µ–≤–æ–ª–æ–∂—Å–∫', '–í—É–∫—Ç—ã–ª', '–í—ã–±–æ—Ä–≥', '–í—ã—Ç–µ–≥—Ä–∞', '–í—è–∑—å–º–∞', '–í—è—Ç–∫–∞', '–ì–∞–≤—Ä–∏–ª–æ–≤-–Ø–º', '–ì–∞–≥–∞—Ä–∏–Ω', '–ì–∞–ª–∏—á', '–ì–∞—Ç—á–∏–Ω–∞', '–ì–¥–æ–≤', '–ì–µ–ª–µ–Ω–¥–∂–∏–∫', '–ì–ª–∞–∑–æ–≤', '–ì–æ–ª–∏—Ü—ã–Ω–æ', '–ì–æ—Ä–Ω–æ-–ê–ª—Ç–∞–π—Å–∫', '–ì–æ—Ä–æ–¥–æ–≤–∏–∫–æ–≤—Å–∫', '–ì–æ—Ä—ã', '–ì–æ—Ä—è—á–∏–Ω—Å–∫', '–ì—Ä–µ–º—è—á–∏–Ω—Å–∫', '–ì—É–±–∞—Ö–∞', '–ì—É–±–∫–∏–Ω', '–ì—É–¥–µ—Ä–º–µ—Å', '–ì—É—Ä–∑—É—Ñ', '–î–∞–≥–æ–º—ã—Å', '–î–∞–ª–º–∞—Ç–æ–≤–æ', '–î–∞–Ω–∫–æ–≤', '–î–µ—Ä–±–µ–Ω—Ç', '–î–∂–µ–π—Ä–∞—Ö', '–î–∂—É–±–≥–∞', '–î–∑–µ—Ä–∂–∏–Ω—Å–∫', '–î–∏–≤–Ω–æ–≥–æ—Ä—Å–∫', '–î–∏–∫—Å–æ–Ω', '–î–º–∏—Ç—Ä–æ–≤', '–î–Ω–æ', '–î–æ–±—Ä—è–Ω–∫–∞', '–î–æ–ª–∏–Ω—Å–∫', '–î–æ–º–æ–¥–µ–¥–æ–≤–æ', '–î—É–±–Ω–∞', '–î—É–¥–∏–Ω–∫–∞', '–ï–≥–æ—Ä—å–µ–≤—Å–∫', '–ï–π—Å–∫', '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', '–ï–ª–∞–±—É–≥–∞', '–ï–ª–∞—Ç—å–º–∞', '–ï–ª–µ—Ü', '–ï–ª—å–Ω—è', '–ï–Ω–∏—Å–µ–π—Å–∫', '–ï—Ä–±–æ–≥–∞—á–µ–Ω', '–ï—Ä—à–æ–≤', '–ï—Å—Å–µ–Ω—Ç—É–∫–∏', '–ñ–µ–ª–µ–∑–Ω–æ–≥–æ—Ä—Å–∫–ö—É—Ä—Å–∫', '–ñ–∏–≥–∞–Ω—Å–∫', '–ñ–∏–≥—É–ª–µ–≤—Å–∫', '–ó–∞–±–∞–π–∫', '–ó–∞–±–∞–π–∫–∞–ª—å—Å–∫', '–ó–∞–≤–æ–¥–æ—É–∫–æ–≤—Å–∫', '–ó–∞–≤—å—è–ª–∏—Ö–∞', '–ó–∞—Ä–∞–π—Å–∫', '–ó–≤–µ–Ω–∏–≥–æ—Ä–æ–¥', '–ó–µ–ª–µ–Ω–æ–≥–æ—Ä—Å–∫', '–ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥', '–ó–ª–∞—Ç–æ—É—Å—Ç', '–ó–º–µ–∏–Ω–æ–≥–æ—Ä—Å–∫', '–ò–≤–∞–Ω', '–ò–≤–∞–Ω–æ–≤–æ', '–ò–≥–∞—Ä–∫–∞', '–ò–≥–∏—Ä–º–∞', '–ò–≥–Ω–∞—à–∏–Ω–æ', '–ò–∂–µ–≤—Å–∫', '–ò–∑–±–µ—Ä–±–∞—à', '–ò–Ω—Ç–∞', '–ò—Ä–±–∏—Ç', '–ò—Ä–∫—É—Ç', '–ò—Ä–∫—É—Ç—Å–∫', '–ò—Å—Ç—Ä–∞', '–ò—à–∏–º', '–ô–æ—à–∫–∞—Ä-–û–ª–∞', '–ö–∞–±–∞–Ω—Å–∫', '–ö–∞–∂–∏–º', '–ö–∞–ª–∞—á', '–ö–∞–ª–∞—á-–Ω–∞-–î–æ–Ω—É', '–ö–∞–ª–∞—á–∏–Ω—Å–∫', '–ö–∞–ª–µ–≤–∞–ª–∞', '–ö–∞–ª–∏–Ω', '–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥', '–ö–∞–ª—É–≥–∞', '–ö–∞–ª—è–∑–∏–Ω', '–ö–∞–º–µ–Ω—å-–Ω–∞-–û–±–∏', '–ö–∞–º—ã—à–∏–Ω', '–ö–∞–º—ã—à–ª–æ–≤', '–ö–∞–Ω–¥–∞–ª–∞–∫—à–∞', '–ö–∞–Ω–µ–≤—Å–∫–∞—è', '–ö–∞–Ω—Å–∫', '–ö–∞—Ä–∞–±—É–¥–∞—Ö–∫–µ–Ω—Ç', '–ö–∞—Ä–∞–±—É–ª–∞–∫', '–ö–∞—Ä–∞—á–∞–µ–≤—Å–∫', '–ö–∞—Ä–≥–∞—Å–æ–∫', '–ö–∞—Ä–ø–∏–Ω—Å–∫', '–ö–∞—Ä—Ç–∞–ª—ã', '–ö–∞—Å–∏–º–æ–≤', '–ö–∞—Å–ø–∏–π—Å–∫', '–ö–∞—Ç–∞–≤-–ò–≤–∞–Ω–æ–≤—Å–∫', '–ö–∞—Ç–∞–π—Å–∫', '–ö–∞—á–∫–∞–Ω–∞—Ä', '–ö–∞—à–∏—Ä–∞', '–ö–∞—à—Ö–∞—Ç–∞—É', '–ö–µ–∂–º–∞', '–ö–µ–º–µ—Ä–æ–≤–æ', '–ö–µ—Ç—á–µ–Ω–µ—Ä—ã', '–ö–∏–∂–∏', '–ö–∏–∑–µ–ª', '–ö–∏–∑–∏–ª—é—Ä—Ç', '–ö–∏–∑–ª—è—Ä', '–ö–∏–º—Ä—ã', '–ö–∏–Ω–≥–∏—Å–µ–ø–ø', '–ö–∏–Ω–µ—à–º–∞', '–ö–∏—Ä–µ–Ω—Å–∫', '–ö–∏—Ä–∂–∞—á', '–ö–∏—Ä–∏—à–∏', '–ö–∏—Ä–æ–≤', '–ö–∏—Ä–æ–≤–æ-–ß–µ–ø–µ—Ü–∫', '–ö–∏—Ä–æ–≤—Å–∫', '–ö–∏—Å–ª–æ–≤–æ–¥—Å–∫', '–ö–ª–∏–Ω', '–ö–ª—é—á', '–ö–æ–≤—Ä–æ–≤', '–ö–æ–≥–∞–ª—ã–º', '–ö–æ–ª–æ–º–Ω–∞', '–ö–æ–ª–ø–∞—à–µ–≤–æ', '–ö–æ–º—Å–æ–º–æ–ª—å—Å–∫-–Ω–∞-–ê–º—É—Ä–µ', '–ö–æ–Ω–¥–æ–ø–æ–≥–∞', '–ö–æ—Ä–æ–ª–µ–≤', '–ö–æ—Ä—Å–∞–∫–æ–≤', '–ö–æ—Å—Ç–æ–º—É–∫—à–∞', '–ö–æ—Å—Ç—Ä–æ–º–∞', '–ö–æ—Ç–µ–ª—å–Ω–∏—á', '–ö–æ—Ç–ª–∞—Å', '–ö–æ—à-–ê–≥–∞—á', '–ö—Ä–∞—Å–Ω–∞—è', '–ö—Ä–∞—Å–Ω–æ–≤–∏—à–µ—Ä—Å–∫', '–ö—Ä–∞—Å–Ω–æ–≥–æ—Ä—Å–∫', '–ö—Ä–∞—Å–Ω–æ–¥', '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–ö—Ä–∞—Å–Ω–æ–∫–∞–º—Å–∫', '–ö—Ä–∞—Å–Ω–æ—Å–µ–ª—å–∫—É–ø', '–ö—Ä–∞—Å–Ω–æ—Ç—É—Ä—å–∏–Ω—Å–∫', '–ö—Ä–∞—Å–Ω–æ—É—Ä–∞–ª—å—Å–∫', '–ö—Ä–∞—Å–Ω–æ—É—Ñ–∏–º—Å–∫', '–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫', '–ö—Ä–æ–ø–æ—Ç–∫–∏–Ω', '–ö—Ä—ã–º—Å–∫', '–ö—É–¥—ã–º–∫–∞—Ä', '–ö—É–∑–Ω–µ—Ü–∫', '–ö—É–ª—É', '–ö—É–ª—É–Ω–¥–∞', '–ö—É–Ω–≥—É—Ä', '–ö—É—Ä–≥–∞–Ω', '–ö—É—Ä–≥–∞–Ω–∏–Ω—Å–∫', '–ö—É—Ä–∏–ª—å—Å–∫', '–ö—É—Ä—Å–∫', '–ö—É—Ä—Ç–∞–º—ã—à', '–ö—É—Ä—É–º–∫–∞–Ω', '–ö—É—Ä—á–∞—Ç–æ–≤', '–ö—É—â–µ–≤—Å–∫–∞—è', '–ö—ã–∑—ã–ª', '–ö—ã—Ä–µ–Ω', '–ö—ã—à—Ç—ã–º', '–ö—è—Ö—Ç–∞', '–õ–∞–±–∏–Ω—Å–∫', '–õ–∞–±—ã—Ç–Ω–∞–Ω–≥–∏', '–õ–∞–∑–∞—Ä–µ–≤—Å–∫–æ–µ', '–õ–µ–Ω–∏–Ω', '–õ–∏–ø–µ—Ü–∫', '–õ–∏—Å—Ç–≤—è–Ω–∫–∞', '–õ–æ–¥–µ–π–Ω–æ–µ', '–õ–æ—Ç–æ—à–∏–Ω–æ', '–õ—É–≥–∞', '–õ—É–∫–∏', '–õ—É—Ö–æ–≤–∏—Ü—ã', '–õ—ã—Å—å–≤–∞', '–õ—å–≥–æ–≤', '–õ—é–±–µ—Ä—Ü—ã', '–õ—è–Ω—Ç–æ—Ä', '–ú–ì–£', '–ú–∞–≥–∞–¥–∞–Ω', '–ú–∞–≥–∞—Å', '–ú–∞–≥–Ω–∏—Ç–æ–≥–æ—Ä—Å–∫', '–ú–∞–π–∫–æ–ø', '–ú–∞–∫–∞—Ä–æ–≤', '–ú–∞–∫—É—à–∏–Ω–æ', '–ú–∞–ª–∞—è', '–ú–∞–ª–≥–æ–±–µ–∫', '–ú–∞–ª–æ—è—Ä–æ—Å–ª–∞–≤–µ—Ü', '–ú–∞—Ä—Ç–∞–Ω', '–ú–∞—Ö–∞—á–∫–∞–ª–∞', '–ú–µ–¥–Ω–æ–≥–æ—Ä—Å–∫', '–ú–µ–ª–µ—É–∑', '–ú–µ—Ä–µ–Ω–≥–∞', '–ú–∏–∞—Å—Å', '–ú–∏–ª–ª–µ—Ä–æ–≤–æ', '–ú–∏–Ω–µ—Ä–∞–ª—å–Ω—ã–µ', '–ú–∏–Ω—É—Å–∏–Ω—Å–∫', '–ú–∏—á—É—Ä–∏–Ω—Å–∫', '–ú–æ–∂–∞–π—Å–∫', '–ú–æ–∂–≥–∞', '–ú–æ–∑–¥–æ–∫', '–ú–æ–∫—à–∞–Ω', '–ú–æ–Ω—á–µ–≥–æ—Ä—Å–∫', '–ú–æ—Ä–¥', '–ú–æ—Ä–æ–∑–æ–≤—Å–∫', '–ú–æ—Ä—à–∞–Ω—Å–∫', '–ú–æ—Å–∫', '–ú–æ—Å–∫–≤–∞', '–ú—É—Ä–∞–≤–ª–µ–Ω–∫–æ', '–ú—É—Ä–∞—à–∏', '–ú—É—Ä–º', '–ú—É—Ä–º–∞–Ω—Å–∫', '–ú—É—Ä–æ–º', '–ú—Ü–µ–Ω—Å–∫', '–ú—ã—Å', '–ú—ã—Ç–∏—â–∏', '–ù–∞–±–µ—Ä–µ–∂–Ω—ã–µ', '–ù–∞–¥—ã–º', '–ù–∞–ª—å—á–∏–∫', '–ù–∞—Ä–æ-–§–æ–º–∏–Ω—Å–∫', '–ù–∞—Ä—Ç–∫–∞–ª–∞', '–ù–∞—Ä—ã–º', '–ù–∞—Ä—å—è–Ω-–ú–∞—Ä', '–ù–∞—Ö–æ–¥–∫–∞', '–ù–µ–≤–µ–ª—å—Å–∫', '–ù–µ–≤–∏–Ω–Ω–æ–º—ã—Å—Å–∫', '–ù–µ–≤—å—è–Ω—Å–∫', '–ù–µ–ø–ª—é–µ–≤–∫–∞', '–ù–µ—Ä—á–∏–Ω—Å–∫', '–ù–µ—Ñ–µ–¥–æ–≤–∞', '–ù–µ—Ñ—Ç–µ–≥–æ—Ä—Å–∫', '–ù–µ—Ñ—Ç–µ–∫–∞–º—Å–∫', '–ù–µ—Ñ—Ç–µ—é–≥–∞–Ω—Å–∫', '–ù–∏–∂–Ω–µ–≤–∞—Ä—Ç–æ–≤—Å–∫', '–ù–∏–∂–Ω–µ–∫–∞–º—Å–∫', '–ù–∏–∂–Ω–µ—É–¥–∏–Ω—Å–∫', '–ù–æ–≤–∞—è', '–ù–æ–≤–≥–æ—Ä–æ–¥', '–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫', '–ù–æ–≤–æ–º–∏—á—É—Ä–∏–Ω—Å–∫', '–ù–æ–≤–æ–º–æ—Å–∫–æ–≤—Å–∫', '–ù–æ–≤–æ—Ä–æ—Å—Å–∏–π–∫–∞', '–ù–æ–≤–æ—Ä–æ—Å—Å–∏–π—Å–∫', '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', '–ù–æ–≤–æ—á–µ—Ä–∫–∞—Å—Å–∫', '–ù–æ–≥–∏–Ω—Å–∫', '–ù–æ–≥–ª–∏–∫–∏', '–ù–æ—Ä–∏–ª—å—Å–∫', '–ù–æ—è–±—Ä—å—Å–∫', '–ù—É—Ä–ª–∞—Ç', '–ù—è–∑–µ–ø–µ—Ç—Ä–æ–≤—Å–∫', '–û–±–Ω–∏–Ω—Å–∫', '–û–±—ä—è—á–µ–≤–æ', '–û–¥–∏–Ω—Ü–æ–≤–æ', '–û–∑–µ—Ä—ã', '–û–π–º—è–∫–æ–Ω', '–û–∫—Ç—è–±—Ä—å—Å–∫–æ–µ', '–û–ª–µ–Ω–µ–≥–æ—Ä—Å–∫', '–û–ª–µ–Ω–µ–∫', '–û–º—Å–∫', '–û–Ω–µ–≥–∞', '–û—Ä–µ–ª', '–û—Ä–µ–Ω–±', '–û—Ä–µ–Ω–±—É—Ä–≥', '–û—Ä–µ—Ö–æ–≤–æ-–ó—É–µ–≤–æ', '–û—Ä—Å–∫', '–û—Å–∞', '–û—Å–∫–æ–ª', '–û—Å—Ç–∞—à–∫–æ–≤', '–û—Ö–∞', '–û—Ö–æ—Ç—Å–∫', '–ü–∞–≤–ª–æ–≤—Å–∫–∞—è', '–ü–∞–ª–∞–Ω–∞', '–ü–∞—Ä—Ç–∏–∑–∞–Ω—Å–∫', '–ü–µ–≤–µ–∫', '–ü–µ–Ω–∂–∏–Ω–æ', '–ü–µ–Ω–∑–∞', '–ü–µ—Ä–º', '–ü–µ—Ç—Ä–æ–∑–∞–≤–æ–¥—Å–∫', '–ü–µ—Ç—É—Ö–æ–≤–æ', '–ü–µ—Ç—É—à–∫–∏', '–ü–µ—á–µ–Ω–≥–∞', '–ü–µ—á–æ—Ä–∞', '–ü–∏–Ω–µ–≥–∞', '–ü–ª–µ—Å', '–ü–ª–µ—Å–µ—Ü–∫', '–ü–æ–¥–æ–ª—å—Å–∫', '–ü–æ–ª–µ', '–ü–æ–ª—è–Ω–∞', '–ü–æ—Ä–æ–Ω–∞–π—Å–∫', '–ü–æ—Å–∞–¥', '–ü–æ—è—Ä–∫–æ–≤–æ', '–ü—Ä–∏–º–æ—Ä—Å–∫–æ-–ê—Ö—Ç–∞—Ä—Å–∫', '–ü—Ä–∏–æ–∑–µ—Ä—Å–∫', '–ü—Ä—É–¥—ã', '–ü—Å–∫–æ–≤', '–ü—É—à–∫–∏–Ω', '–ü—É—à–∫–∏–Ω–æ', '–ü—É—à–∫–∏–Ω—Å–∫–∏–µ', '–ü—ã—à–º–∞', '–ü—è—Ç–∏–≥–æ—Ä—Å–∫', '–†–∞–º–µ–Ω—Å–∫–æ–µ', '–†–µ–±—Ä–∏—Ö–∞', '–†–µ–≤–¥–∞', '–†–∂–µ–≤', '–†–æ—Å—Ç', '–†–æ—Å—Ç–æ–≤', '–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É', '–†—É–±—Ü–æ–≤—Å–∫', '–†—É–∑–∞', '–†—É—Å—Å–∞', '–†—ã–±–∏–Ω—Å–∫', '–†—ã–ª—å—Å–∫', '–†—è–∂—Å–∫', '–°–∞–ª–∞–≤–∞—Ç', '–°–∞–ª–µ—Ö–∞—Ä–¥', '–°–∞–ª—å—Å–∫', '–°–∞–º–∞—Ä', '–°–∞–º–∞—Ä–∞', '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', '–°–∞—Ä–∞–Ω—Å–∫', '–°–∞—Ä–∞–ø—É–ª', '–°–∞—Ä–∞—Ç–æ–≤', '–°–∞—Ä–æ–≤', '–°–∞—Å–æ–≤–æ', '–°–∞—è–Ω—Å–∫', '–°–≤–µ—Ä–¥', '–°–≤–µ—Ç–ª–æ–≥–æ—Ä—Å–∫', '–°–µ–≤–µ—Ä–æ-–ö—É—Ä–∏–ª—å—Å–∫', '–°–µ–≤–µ—Ä–æ–±–∞–π–∫–∞–ª—å—Å–∫', '–°–µ–≤–µ—Ä–æ–¥–≤–∏–Ω—Å–∫', '–°–µ–≤–µ—Ä–æ–º–æ—Ä—Å–∫', '–°–µ–≤–µ—Ä–æ—É—Ä–∞–ª—å—Å–∫', '–°–µ–π–º—á–∞–Ω', '–°–µ–º–ª—è—á–∏–∫–∏', '–°–µ—Ä–∞—Ñ–∏–º–æ–≤–∏—á', '–°–µ—Ä–≥–∏–µ–≤', '–°–µ—Ä–µ–±—Ä—è–Ω—ã–µ', '–°–µ—Ä–µ–¥–Ω–∏–∫–æ–≤–æ', '–°–µ—Ä–æ–≤', '–°–µ—Ä–ø—É—Ö–æ–≤', '–°–∏–±–∏—Ä—Å–∫–æ–µ', '–°–∫–æ–≤–æ—Ä–æ–¥–∏–Ω–æ', '–°–ª–∞–≤–≥–æ—Ä–æ–¥', '–°–ª–∞–≤—è–Ω—Å–∫-–Ω–∞-–ö—É–±–∞–Ω–∏', '–°–ª–∞–¥–∫–æ–≤–æ', '–°–ª—é–¥—è–Ω–∫–∞', '–°–º–∏—Ä–Ω—ã—Ö', '–°–º–æ–ª–µ–Ω—Å–∫', '–°–Ω–µ–∂–∏–Ω—Å–∫', '–°–Ω–µ–∂–Ω–æ–≥–æ—Ä—Å–∫', '–°–æ–±–æ–ª–µ–≤–æ', '–°–æ–ª–∏–∫–∞–º—Å–∫', '–°–æ–ª–Ω–µ—á–Ω–æ–≥–æ—Ä—Å–∫', '–°–æ–ª–æ–≤–∫–∏', '–°–æ–ª—å-–ò–ª–µ—Ü–∫', '–°–æ—Ä–æ—á–∏–Ω—Å–∫', '–°–æ—Ä—Ç–∞–≤–∞–ª–∞', '–°–æ—Å–Ω–æ–≥–æ—Ä—Å–∫', '–°–æ—Å—å–≤–∞', '–°–æ—á–∏', '–°—Ç–∞—Ä–∞—è', '–°—Ç–µ—Ä–ª–∏—Ç–∞–º–∞–∫', '–°—Ç—É–ø–∏–Ω–æ', '–°—É–¥–∞–∫', '–°—É–∑—É–Ω', '–°—É–Ω—Ç–∞—Ä', '–°—É—Ä–≥—É—Ç', '–°—É—Å—É–º–∞–Ω', '–°—É—Ö–∏–Ω–∏—á–∏', '–°—ã–∫—Ç—ã–≤–∫–∞—Ä', '–¢–∞–≤–¥–∞', '–¢–∞–≥–∞–Ω—Ä–æ–≥', '–¢–∞–≥–∏–ª', '–¢–∞–π—à–µ—Ç', '–¢–∞–ª–¥–æ–º', '–¢–∞–º–±–æ–≤', '–¢–∞—Ä–∫–æ-–°–∞–ª–µ', '–¢–∞—à—Ç–∞–≥–æ–ª', '–¢–µ–±–µ—Ä–¥–∞', '–¢–µ–º—Ä—é–∫', '–¢–µ—Ä–∏–±–µ—Ä–∫–∞', '–¢–µ—Ä—Å–∫–æ–ª', '–¢–∏–∫—Å–∏', '–¢–∏–º–∞—à–µ–≤—Å–∫', '–¢–∏—Ö–≤–∏–Ω', '–¢–∏—Ö–æ—Ä–µ—Ü–∫', '–¢–æ–±–æ–ª—å—Å–∫', '–¢–æ–∫–º–∞', '–¢–æ–∫—Å–æ–≤–æ', '–¢–æ–ª—å—è—Ç—Ç–∏', '–¢–æ–º–∞—Ä–∏', '–¢–æ–º–ø–∞', '–¢–æ–º—Å–∫', '–¢–æ—Ä–∂–æ–∫', '–¢–æ—Å–Ω–æ', '–¢–æ—Ç—å–º–∞', '–¢—Ä–æ–∏—Ü–∫', '–¢—Ä–æ–∏—Ü–∫–æ-–ü–µ—á–æ—Ä—Å–∫', '–¢—É–∞–ø—Å–µ', '–¢—É–ª–∞', '–¢—É–ª–ø–∞–Ω', '–¢—É–ª—É–Ω', '–¢—É—Ä–∞', '–¢—É—Ä—É—Ö–∞–Ω—Å–∫', '–¢—É—Ç–∞–µ–≤', '–¢—É—Ç–æ–Ω—á–∞–Ω—ã', '–¢—ã–º–æ–≤—Å–∫–æ–µ', '–¢—ã–Ω–¥–∞', '–¢—ã—Ä–Ω—ã–∞—É–∑', '–£–≤–∞—Ä–æ–≤–æ', '–£–≥–ª–µ–≥–æ—Ä—Å–∫', '–£–≥–ª–∏—á', '–£–ª–∞–Ω-–£–¥—ç', '–£–ª—å—è–Ω–æ–≤—Å–∫', '–£—Ä—É—Å-–ú–∞—Ä—Ç–∞–Ω', '–£—Ä—é–ø–∏–Ω—Å–∫', '–£—Å–∏–Ω—Å–∫', '–£—Å–æ–ª—å–µ', '–£—Å—Å—É—Ä–∏–π—Å–∫', '–£—Å—Ç—å-–ë–∞—Ä–≥—É–∑–∏–Ω', '–£—Å—Ç—å-–î–∂–µ–≥—É—Ç–∞', '–£—Å—Ç—å-–ò–ª–∏–º—Å–∫', '–£—Å—Ç—å-–ò—à–∏–º', '–£—Å—Ç—å-–ö–∞–ª–º–∞–Ω–∫–∞', '–£—Å—Ç—å-–ö–∞–º—á–∞—Ç—Å–∫', '–£—Å—Ç—å-–ö–∞—Ç–∞–≤', '–£—Å—Ç—å-–ö—É–ª–æ–º', '–£—Å—Ç—å-–ö—É—Ç', '–£—Å—Ç—é–≥', '–£—Å—Ç—é–∂–Ω–∞', '–£—Ñ–∞', '–£—Ö—Ç–∞', '–£—á–∞–ª—ã', '–£—ç–ª–µ–Ω', '–§–∞—Ç–µ–∂', '–§–µ–æ–¥–æ—Å–∏—è', '–•–∞–±–∞—Ä–æ–≤—Å–∫', '–•–∞–Ω—Ç', '–•–∞–Ω—Ç—ã-–ú–∞–Ω—Å–∏–π—Å–∫', '–•–∞—Å–∞–≤—é—Ä—Ç', '–•–∞—Å–∞–Ω', '–•–∞—Ç–∞–Ω–≥–∞', '–•–∏–º–∫–∏', '–•–æ–ª–º–æ–≥–æ—Ä—ã', '–•–æ–ª–º—Å–∫', '–•–æ—Å—Ç–∞', '–•—É–∂–∏—Ä', '–¶–∏–º–ª—è–Ω—Å–∫', '–ß–µ–±–æ–∫—Å–∞—Ä—ã', '–ß–µ–≥–µ–º', '–ß–µ–ª–Ω—ã', '–ß–µ–ª—é—Å–∫–∏–Ω', '–ß–µ–ª—è–±', '–ß–µ–ª—è–±–∏–Ω—Å–∫', '–ß–µ—Ä–µ–º—Ö–æ–≤–æ', '–ß–µ—Ä–µ–ø–æ–≤–µ—Ü', '–ß–µ—Ä–∫–µ—Å—Å–∫', '–ß–µ—Ä–º–æ–∑', '–ß–µ—Ä–Ω—è—Ö–æ–≤—Å–∫', '–ß–µ—Ä—É—Å—Ç–∏', '–ß–µ—Ö–æ–≤', '–ß–∏–∫–æ–ª–∞', '–ß–∏—Ç–∞', '–ß–æ–∫—É—Ä–¥–∞—Ö', '–ß—É–ª—ã–º', '–®–∞–¥—Ä–∏–Ω—Å–∫', '–®–∞–ª–∏', '–®–∞–º–∞—Ä—ã', '–®–∞—Ä—å—è', '–®–∞—Ç–∫–∏', '–®–∞—Ç—É—Ä–∞', '–®–∞—Ö–æ–≤—Å–∫–∞—è', '–®–∞—Ö—Ç—ã', '–®–µ–ª–∞–≥–æ–Ω—Ü—ã', '–®–µ–ª–µ—Ö–æ–≤', '–®–µ–Ω–∫—É—Ä—Å–∫', '–®–µ—Ä–µ–≥–µ—à', '–®–µ—Ä–µ–º–µ—Ç—å–µ–≤–æ', '–®–∏–ª–∫–∞', '–®–º–∏–¥—Ç–∞', '–®—É–º–∏—Ö–∞', '–®—É—è', '–©–µ–ª–∫–æ–≤–æ', '–©–µ–ª—å—è—é—Ä', '–≠–ª–∏—Å—Ç–∞', '–≠–ª—å–±—Ä—É—Å', '–≠–ª—å—Ç–æ–Ω', '–≠–Ω–≥–µ–ª—å—Å', '–Æ–≥–æ—Ä—Å–∫', '–Æ–∂–Ω–æ-–ö—É—Ä–∏–ª—å—Å–∫', '–Æ–∂–Ω–æ-–°–∞—Ö–∞–ª–∏–Ω—Å–∫', '–Æ–∂–Ω–æ—É—Ä–∞–ª—å—Å–∫', '–Æ—Ä–æ–≤—Å–∫', '–Æ—Ä—å–µ–≤–µ—Ü', '–Ø–∫—É—Ç', '–Ø–∫—É—Ç—Å–∫', '–Ø–∫—à–∞', '–Ø–ª—Ç–∞', '–Ø–ª—É—Ç–æ—Ä–æ–≤—Å–∫', '–Ø–º–±—É—Ä–≥', '–Ø—Ä-–°–∞–ª–µ', '–Ø—Ö—Ä–æ–º–∞', '–Ø—à–∞–ª—Ç–∞']


@dp.message(Command('games'))
async def games(message: Message):
    builder = InlineKeyboardBuilder()
    builder.add(types.InlineKeyboardButton(
        text="–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ",
        callback_data="guess_number")
    )
    builder.add(types.InlineKeyboardButton(
        text="–ì–æ—Ä–æ–¥–∞",
        callback_data="towns")
    )
    await message.answer(
        "–í –∫–∞–∫—É—é –∏–≥—Ä—É —Ö–æ—á–µ—à—å —Å—ã–≥—Ä–∞—Ç—å?",
        reply_markup=builder.as_markup()
    )


@dp.callback_query(F.data == "guess_number")
async def start_game_guess_number(callback: CallbackQuery):
    game_data[callback.from_user.id] = ['guess_number', random.randint(1, 100)]
    await callback.message.answer(f"–Ø –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100, –ø–æ–ø—Ä–æ–±—É–π —É–≥–∞–¥–∞—Ç—å –µ–≥–æ.")
    await bot.delete_message(callback.message.chat.id, callback.message.message_id)


@dp.callback_query(F.data == "towns")
async def start_game_towns(callback: CallbackQuery):
    game_data[callback.from_user.id] = ['towns', random.choice(towns)]
    await callback.message.answer(f"–Ø –∑–∞–≥–∞–¥–∞–ª –≥–æ—Ä–æ–¥, –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ - { game_data[callback.from_user.id][1] }."
                         f"–í–∞—à–∞ –∑–∞–¥–∞—á–∞ –Ω–∞–∑–≤–∞—Ç—å –≥–æ—Ä–æ–¥ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –±—É–∫–≤—É")
    await bot.delete_message(callback.message.chat.id, callback.message.message_id)


@dp.callback_query(F.data == 'create_pet')
async def pre_create_pet(callback: CallbackQuery):
    game_data[callback.from_user.id] = ['create_pet']
    await callback.message.answer('–í–≤–µ–¥–∏—Ç–µ –∏–º—è –¥–ª—è –≤–∞—à–µ–≥–æ –ø–∏—Ç–æ–º—Ü–∞')


async def create_pet(message: Message):
    try:
        name = message.text.split()[0].capitalize()
        base.create_pet(cursor, message.from_user.id, name)
        game_data.pop(message.from_user.id)
        await message.answer(f'–ü–∏—Ç–æ–º–µ—Ü —Å –∏–º–µ–Ω–µ–º {name} —Å–æ–∑–¥–∞–Ω')
    except:
        await message.answer(f'–í—ã –≤–≤–µ–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–º—è')


@dp.message(Command('feed'))
async def feed_pet(message: Message):
    try:
        base.feed_pet(cursor, message.from_user.id)
        await message.answer('–ü–∏—Ç–æ–º–µ—Ü –Ω–∞–∫–æ—Ä–º–ª–µ–Ω!')
    except Exception as ex:
        await message.answer('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞')
        print(ex)


# –Ω–∞ –¥–∞–Ω–Ω—ã–µ –º–æ–º–µ–Ω—Ç –≤ –º–∞–≥–∞–∑–∏–Ω–µ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ—Ä–º, –Ω–æ –ø–æ—Ç–æ–º –¥–æ–±–∞–≤–∏—Ç—Å—è –µ—â—ë —á—Ç–æ-–Ω–∏–±—É–¥—å
@dp.message(Command('assortment'))
async def get_assortment(message: Message):
    builder = InlineKeyboardBuilder().add(types.InlineKeyboardButton(
        text="–ö—É–ø–∏—Ç—å –∫–æ—Ä–º –∑–∞ 1 ü™ô",
        callback_data="buy_food")
    )
    await message.answer(f"–ê—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç:", reply_markup=builder.as_markup())


@dp.callback_query(F.data == 'buy_food')
async def buy_food(callback: CallbackQuery):
    try:
        if base.get_pet_info(cursor, callback.from_user.id)[4] >= 1:
            base.buy_food(cursor, callback.from_user.id)
            await callback.message.answer('–ö–æ—Ä–º —É—Å–ø–µ—à–Ω–æ –∫—É–ø–ª–µ–Ω')
        else:
            await callback.message.answer('–£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ü™ô')
    except Exception as ex:
        await callback.message.answer('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞')
        print(ex)


async def main() -> None:
    global connection, cursor, bot
    connection = sqlite3.connect('files.db', check_same_thread=True)
    cursor = connection.cursor()
    bot = Bot(config.token)
    asyncio.create_task(change_count_food_and_mood())
    await dp.start_polling(bot)


@dp.message(CommandStart())
async def command_start_handler(message: Message) -> None:
    cursor.execute('INSERT OR IGNORE INTO users (id) VALUES(?)', (message.from_user.id,))
    cursor.connection.commit()
    builder = InlineKeyboardBuilder().add(types.InlineKeyboardButton(
        text="–°–æ–∑–¥–∞—Ç—å –ø–∏—Ç–æ–º—Ü–∞",
        callback_data="create_pet")
    )
    await message.answer(f"–ü—Ä–∏–≤–µ—Ç, { message.from_user.full_name }!", reply_markup=builder.as_markup())


@dp.message(Command('pet_info'))
async def get_pet_info(message: Message):
    await message.answer(f'–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–µ–º –ø–∏—Ç–æ–º—Ü–µ: \n'
                         f' { base.get_pet_info(cursor, message.from_user.id) }')


@dp.message(Command('get_admin_status'))
async def get_admin_status(message: Message):
    if message.text.replace('/get_admin_status ', '') == config.password:
        base.get_admin_status(cursor, message.from_user.id)
        await message.answer('–ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ–ª—É—á–µ–Ω—ã!')
        await message.delete()


# —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑ –≤ 4 —á–∞—Å–∞ —É–º–µ–Ω—å—à–∞–µ—Ç —Å—ã—Ç–æ—Å—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–µ–≤
async def change_count_food_and_mood():
    while True:
        base.change_count_food_and_mood(cursor)
        await asyncio.sleep(60 * 60 * 4)


# –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –∏–≥—Ä—ã —É–≥–∞–¥–∞–π —á–∏—Å–ª–æ
async def guess_number(message: Message):
    guessed_number = game_data[message.from_user.id][1]

    try:
        user_number = int(message.text)
    except ValueError:
        await message.answer("–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ.")
        return

    if user_number == guessed_number:
        await message.answer("–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã —É–≥–∞–¥–∞–ª —á–∏—Å–ª–æ.")
        base.add_coins(cursor, message.from_user.id, 2)
        base.add_mood(cursor, message.from_user.id, 5)
        game_data.pop(message.from_user.id)
    elif user_number < guessed_number:
        await message.answer("–ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –±–æ–ª—å—à–µ.")
    else:
        await message.answer("–ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –º–µ–Ω—å—à–µ.")


# –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –∏–≥—Ä—ã –≤ –≥–æ—Ä–æ–¥–∞
async def game_towns(message: types.Message):
    try:
        if game_data[message.from_user.id][1][-1] == message.text[0].lower() and message.text.capitalize() in towns \
                and message.text != game_data[message.from_user.id]:
            await message.answer('–í—ã –º–æ–ª–æ–¥—Ü—ã!')
            base.add_coins(cursor, message.from_user.id, 2)
            base.add_mood(cursor, message.from_user.id, 5)
        else:
            await message.answer('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç, –≤—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏')
    except Exception as ex:
        print(ex)
    finally:
        game_data.pop(message.from_user.id)


# —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –±–µ–∑ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –∏–≥—Ä—ã
@dp.message()
async def messages(message: types.Message):
    try:
        if game_data[message.from_user.id][0] == 'guess_number':
            await guess_number(message)
        elif game_data[message.from_user.id][0] == 'create_pet':
            await create_pet(message)
        elif game_data[message.from_user.id][0] == 'towns':
            await game_towns(message)
    except:
        # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∏–≥—Ä–∞–µ—Ç –Ω–∏ –≤ –∫–∞–∫—É—é –∏–≥—Ä—É
        pass


if __name__ == "__main__":
    logging.basicConfig(level=logging.INFO, stream=sys.stdout)
    asyncio.run(main())
